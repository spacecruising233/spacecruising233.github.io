---
title: 树的直径与重心
tags: [OI, 树论]
category: OI
description: 关于树的直径与重心的学习笔记
published: 2025-08-23
draft: true
---

# 树的直径

## 01 定义

**树的直径**：树上最长的简单路径。

## 02 性质

1. 直径的两端点一定是叶子节点。

2. 到任意一点最远的点一定是直径的某个端点。（证明见下）

3. 在树上加点，树的直径长度变化量 $\le 1$ 。

4. **树的直径不一定唯一**，所有直径交于直径的中点。

## 03 求法1 - 两遍DFS

该做法时间复杂度为 $O(n)$ 。

利用性质2，任取一节点为根，第一遍DFS遍历离根最远的点；再以最远的点为根，第二遍DFS再遍历离根最远的点。

### 正确性证明

#### 直观证明

我们只需证：**第一遍DFS找到的最远的点是直径的一端**。

比如说，起始点不在直径上的情况。

我们把树的直径标为红色，假设这种方法找到的不是直径的一端：

![](prove1.png)

那么橙色路径会取代红色路径，成为新的直径。

#### 严谨一点？

设直径两端点分别为 $a, b$ ，从 $s$ 开始搜寻，找到点 $d$ 。需要分类讨论。

- 若 $s$ 是 $(a, b)$ 上一点：那么 $(a, d) = (a, s) + (s, d) \ge (a, s) + (s, b) = (a, b)$ ，与 $(a, b)$ 是树的直径矛盾。

- 若 $s$ 不在 $(a, b)$ 上：
  
  - 若 $(s, d)$ 与 $(a, b)$ 相交于 $m$ ，类比上一点有 $(a, d) \ge (a, b)$ ，矛盾。
  
  - 若 $(s, d)$ 与 $(a, b)$ 无交点，我们希望：能够用一条路径把 $(s, d)$ 和 $(a, b)$ “接上“，转成上一种情况。于是设 $m$ 是 $(s, d)$ 与 $(s, b)$ 的”分叉口“，$n$ 是 $(b, a)$ 与 $(b, m)$ 的“分叉口”，应有：
    
    $(s, d) \ge (s, b)$ ，两边同减 $(s, m)$ 得 $(m, d) \ge (m, b)$ ，而 $(n, d) = (m, d) + (m, n)$ ， $(n, b) = (m, b) - (m, n)$ ，说明 $(n, d) > (n, b)$，这就又回到了第一种情况。

于是定理得证。

### 代码实现

```cpp

```
